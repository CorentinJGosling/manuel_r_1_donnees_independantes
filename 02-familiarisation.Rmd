# Familiarisation avec R

## Installation de R et R studio
Pour ce manuel, nous vous recommandons de travailler avec R Studio. R Studio est simplement un add-on de R permettant d’avoir une interface graphique afin – entre autre – de pouvoir visualiser facilement ses données. 
L’installation de R Studio se fait en 2 temps. Tout d’abord, rendez vous sur la page de R puis installez la version basique de R (https://cran.r-project.org/mirrors.html). Si vous travaillez sous Mac OS X, rendez vous sur : https://cran.r-project.org/bin/macosx/.
Une fois que R est installé, vous allez pouvoir installer R Studio. Pour ce faire, rendez vous sur : https://rstudio.com/products/rstudio/download/. 

## Fonctionnement des packages
Dans R, un « package » correspond à une sorte de petit programme pouvant être ajouté à R et vous permettant d’accéder à des fonctionnalités non directement disponibles dans la version basique de R. Par exemple, la version de base de R dispose d’une fonction permettant de calculer une corrélation (cor.test) mais ne comporte pas de fonction permettant de faire des modèles mixtes. Un « package » nommé lme4 a été créé pour permettre de réaliser ces modèles mixtes dans R. 
Chaque package ne nécessite d’être installé qu’une seule fois. Ceci est fait grâce à la commande : 
 install.packages("Nom-du-package") 
En revanche, à chaque fois que R est fermé puis ouvert (ou juste après l’installation d’un package), vous devez obligatoirement charger la librairie d’un package si vous souhaitez l’utiliser. Ceci est fait grâce à la commande : 
 library(Nom-du-package)<br>
En résumé, vous ne devez installer le package dont vous avez besoin qu’une seule fois. A chaque fois que vous fermez R, vous devrez recharger la librairie associée au package lors de la prochaine ouverture si vous souhaitez l’utiliser à nouveau. 

## Guillemets et R
Dans R, l’utilisation de guillemets est fréquente. Cependant, un point important est qu’il ne tolère qu’un seul type de guillemets : `"`<br>
Tous les autres types de guillemets (e.g., `«` `»`) conduiront à un message d’erreur.<br> 
Si jamais vous importez un code R rédigé sur un éditeur de texte, il est important de convertir les guillements dans le bon format. A partir de word, vous pouvez créer ces guillemets en cliquant sur la touche de guillemet classique («) puis en appuyant immédiatement après sur les touches `ctrl+z`. Les guillemets américains requis par R (") s’afficheront automatiquement.

## Six commandes INDISPENSABLES
1. `<-`  Assigne ce qui vient à droite de la flèche à ce qui est à gauche de la flèche. Par exemple, si un utilisateur tape la ligne de commande  `x<-2` , alors la commande  `x`  affichera ce qui est contenu dans x (ici 2) et la commande  `x+3`  donnera le résultat 5. <br>

```{r}
x <- 2
x
x + 3
```

2. `summary()`   Cette fonction permet de produire le résumé d’un jeu de données ou des résultats de divers modèles statistiques.

3. `~`   Au sein d’une formule, ce qui vient à gauche du tilde correspond à la variable dépendante et ce qui vient à droite du tilde correspond à la variable indépendante. La commande  `y ~ x`  signifie que l’on souhaite savoir si `x` prédit, ou est lié, à `y`. <br>
 
4. `+`  Au sein d’une formule, le symbole `+` sépare 2 effets principaux. Par exemple, la commande `y ~ x + z` signifie que l’on souhaite obtenir l’effet principal de `x` et l’effet principal de `z` sur la variable dépendante `y`.<br>
 
5. `*` permet de créer des plans factoriels. Par exemple, la commande `y <- x * z` signifie que l’on souhaite obtenir l’effet principal de `x`, l’effet principal de `z` ainsi que l’interaction entre x et z.<br>

6. `:` Au sein d’une formule, le symbole `:` permet de créer une interaction entre deux termes. Par exemple, la commande `y <- x : z` signifie que l’on souhaite obtenir l’interaction entre `x` et `z`. Les commandes `y <- x + z + x:z` et `y <- x * z`  produisent des résultats identiques. <br>

En résumé, pour construire un modèle statistique, R utilise la syntaxte suivante
```{r eval=FALSE}
formula = y ~ x # effet principal de x sur y 
formula = y ~ x + z # effets principaux de x et z sur y 
formula = y ~ x + z + m # effets principaux de x, z et m sur y 
formula = y ~ x + z + m + x:z # effets principaux de x, z et m sur y et interaction entre x et z sur y
formula = y ~ x*z + m # commande strictement équivalente à la ligne précédente
formula = y ~ x + z + m + x:z + x:m + m:z + x:z:m # analyse de tous les effets principaux, des 3 interactions simples et de l'interaction double sur y
formula = y ~ x*m*z # commande strictement équivalente à la ligne précédente
```

## Quelques commandes non-indispensables

 `c()`  Permet de créer un vecteur composé de nombres ou de caractères. Chaque élément doit être séparé par une virgule et tout caractère doit être entouré de guillemets. Concrètement, la commande `c(1, 2, 3)` donnera le résultat `1 2 3` et `c("a","b","c")` donnera le résultat `a b c`. <br>
En combinant avec la flèche ci-dessus, si un utilisateur indique que `x <- c(1, 2, 3)` et que
 ` y <- c(4, 5, 6)` , alors  `x+y`   donnera le résultat `5 7 9`.<br>

`cbind()`  Cette fonction permet de combiner deux vecteurs de nombres ou de caractères. Les vecteurs doivent être séparés par une virgule. Par exemple si  `x <- c(1, 2, 3, 4)`  et  `y <- c("a", "b", "c", "d")`  alors `cbind(x, y)` comprendra 2 vecteurs de longueur 4 : `c(1, 2, 3, 4)` et `c("a", "b", "c", "d")`. <br>

`#`   Ce symbole permet d’indiquer à R de ne pas prendre en compte ce qui vient à sa droite. Par exemple, si `x <- 2 #+3` alors `x+x` donne le résultat 4. Très utilisé pour décrire ce que l’on fait lorsque l’on partage le code avec des co-auteurs (par exemple `x<-2 # je définis la variable x`). <br>

`subset`  Permet de sélectionner une partie d’un jeu de données selon des conditions logiques. Par exemple, pour un jeu de données nommé my_data comprenant 4 colonnes nommées `a` `b` `c` et `d`, `subset(my_data, a==2)` ne sélectionnera que les lignes du jeu de données dont la valeur de la colonne `a` est égale à 2.<br>

`$` permet de sélectionner une colonne spécifique d’un jeu de données grâce à son nom. Par exemple, pour un jeu de données nommé my_data comprenant 4 colonnes nommées `a` `b` `c` et `d`, la commande `my_data$d` permettra d’extraire un vecteur comprenant toutes les données de la colonne `d`. <br>

`[ , ]` L’utilisation de crochets collés au nom d'un jeu de données permet également de sélectionner une partie du jeu de données grâce à la position des lignes et des colonnes dans le jeu de données. <br>
Les crochets contiennent 2 parties, l’une avant la virgule et l’autre après la virgule. La partie avant la virgule sert à sélectionner les lignes d’un jeu de données. Par exemple, pour un jeu de données nommé `my_data`,  `my_data[4]`  sélectionnera la ligne 4 du jeu de données et  `my_data[4:140]` sélectionnera les lignes 4 à 140. A noter que `my_data[4]` et `my_data[4,]` donneront des résultats identiques.<br>
De plus,  `my_data[ ,5]`   sélectionnera la colonne 5 et  `my_data[24:36, 5]` permettra de sélectionner les lignes 24 à 36 de la colonne 5. <br>

`mean()` Permet de calculer la moyenne d’un vecteur.<br>
`sd()`  Permet de calculer l’écart-type d’un vecteur.<br>
`length`  Permet de calculer le nombre d'élements compris dans un vecteur

## Les opérateurs de relation
Les 6 opérateurs de relation sont : <br>
- plus petit que : `<` <br>
- plus grand que : `>` <br>
- plus petit ou égal que : `<=` <br>
- plus grand ou égal que : `>=` <br>
- égal à : `==`<br>
- différent de : `!=` <br>

## Les principaux opérateurs de logique
Les 3 principaux opérateurs de logique sont :<br>
- et `&`<br>
- non `!`<br>
- ou `|` <br>
Par exemple, pour un jeu de données nommé my_data comprenant 4 colonnes nommées `a` `b` `c` et `d`,  `subset(my_data, a == 2 & b != "Fille")` ne sélectionnera que les lignes du jeu de données my_data dont la valeur de la colonne `a` est égale à 2 et dont le caractère compris dans la colonne `b` est différent de Fille. 